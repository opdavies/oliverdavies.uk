---
import PageLayout from '../../layouts/PageLayout.astro'

const emails = await Astro.glob('../../daily-emails/*.md');

const sortedEmails = emails
  .sort((a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
  )
---

<PageLayout title="Daily emails archive">
  <ul>
    {sortedEmails.map(email => (
      <li>
        <a href={`/${email.frontmatter.permalink}`}>
          {new Date(email.frontmatter.pubDate).toLocaleDateString('en-GB', {
            day: 'numeric',
            month: 'long',
            year: 'numeric',
          })} -
          {email.frontmatter.title}
        </a>
      </li>
    ))}
  </ul>
</PageLayout>
